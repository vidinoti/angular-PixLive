"use strict";var pixliveModule=angular.module("pixlive",[]);pixliveModule.directive("pxlView",["$timeout","$ionicPosition","$ionicPlatform",function(a,b,c){return{restrict:"E",require:"^?ionNavView",priority:800,compile:function(d,e){function f(a,b,c,d){var e=a.$parent;a.$watch(function(){return(e.$hasHeader?" has-header":"")+(e.$hasSubheader?" has-subheader":"")+(e.$hasFooter?" has-footer":"")+(e.$hasSubfooter?" has-subfooter":"")+(e.$hasTabs?" has-tabs":"")+(e.$hasTabsTop?" has-tabs-top":"")},function(a,c){b.removeClass(c),b.addClass(a)})}function g(e,f,g,h){e.$on("$ionicView.beforeEnter",function(a,b){e.arView&&e.arView.beforeEnter()}),e.$on("$ionicView.afterEnter",function(g,h){e.arView?(e.onResize(),e.arView.afterEnter()):c.ready(function(){window.cordova&&window.cordova.plugins&&window.cordova.plugins.PixLive&&(d.children().remove(),e.pixliveTimeout=a(function(){var a=b.offset(f),c=a.top,d=a.left,g=a.width,h=a.height;e.pixliveTimeout=null,e.arView=window.cordova.plugins.PixLive.createARView(d,c,g,h),e.onResize=function(){var a=b.offset(f),c=a.top,d=a.left,g=a.width,h=a.height;e.arView.resize(d,c,g,h)},ionic.on("resize",e.onResize,window)},300))})}),e.$on("$ionicView.beforeLeave",function(b,c){e.pixliveTimeout&&(a.cancel(e.pixliveTimeout),e.pixliveTimeout=null),e.arView&&e.arView.beforeLeave()}),e.$on("$ionicView.afterLeave",function(a,b){e.arView&&e.arView.afterLeave()}),e.$on("$destroy",function(){e.pixliveTimeout&&(a.cancel(e.pixliveTimeout),e.pixliveTimeout=null),e.arView&&(ionic.off("resize",e.onResize,window),e.arView.destroy())})}return d.addClass("scroll-content ionic-scroll scroll-content-false"),{pre:f,post:g}}}}]),pixliveModule.factory("PxlRemoteController",["$timeout","$ionicPlatform","$q",function(a,b,c){return{synchronize:function(a){var d=c.defer();return b.ready(function(){window.cordova&&window.cordova.plugins&&window.cordova.plugins.PixLive?window.cordova.plugins.PixLive.synchronize(a,function(a){d.resolve(a)},function(a){d.reject(a)}):d.resolve([])}),d.promise}}}]);